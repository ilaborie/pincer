#!/usr/bin/env bash
#MISE description="Run comprehensive pre-push checks: format, lint, and test"

set -eu

echo "ğŸ¦€ Running Rust checks..."

# Check formatting
echo "ğŸ“ Checking Rust formatting..."
cargo fmt --all --check

# Check no lint warning
echo "ğŸ” Running Rust clippy..."
cargo clippy --all-targets --all-features -- -D warnings

# Run tests
echo "ğŸ§ª Running Rust unit tests..."
cargo nextest run --no-fail-fast --all-features

# Run doc tests
echo "ğŸ“š Running Rust doctests..."
cargo test --doc --all-features

# Run ignored doc tests (require async runtime or network)
echo "ğŸ“š Running ignored Rust doctests..."
cargo test --doc --all-features -- --ignored

echo ""
echo "âœ… All checks passed!"
echo "Ready for commit! ğŸš€"
