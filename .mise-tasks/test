#!/usr/bin/env bash
#MISE description="Run Rust tests using nextest and doctests"

set -eu

echo "ğŸ§ª Running Rust tests..."

# Run unit tests with nextest (faster parallel execution)
echo "ğŸ¦€ Running Rust unit tests with nextest..."
cargo nextest run --no-fail-fast --all-features

# Run doctests
echo "ğŸ“š Running Rust doctests..."
cargo test --doc --all-features

# Run ignored doctests (require async runtime or network)
echo "ğŸ“š Running ignored Rust doctests..."
cargo test --doc --all-features -- --ignored

echo "âœ… All Rust tests passed!"
